import{al as T,am as _,an as j,r as g,ao as M,J as O,a2 as C,ap as D,U as A,a7 as R,o as L}from"./entry.62cc1941.js";function W(e,t){let n,o,u;const r=g(!0),l=()=>{r.value=!0,u()};C(e,l,{flush:"sync"});const a=typeof t=="function"?t:t.get,i=typeof t=="function"?void 0:t.set,s=D((d,f)=>(o=d,u=f,{get(){return r.value&&(n=a(),r.value=!1),o(),n},set(v){i==null||i(v)}}));return Object.isExtensible(s)&&(s.trigger=l),s}function h(e){return _()?(j(e),!0):!1}function $(e){let t=0,n,o;const u=()=>{t-=1,o&&t<=0&&(o.stop(),n=void 0,o=void 0)};return(...r)=>(t+=1,n||(o=T(!0),n=o.run(()=>e(...r))),h(u),n)}function y(e){return typeof e=="function"?e():O(e)}const E=typeof window<"u"&&typeof document<"u",P=Object.prototype.toString,k=e=>P.call(e)==="[object Object]",B=()=>{};function F(e,t,n={}){const{immediate:o=!0}=n,u=g(!1);let r=null;function l(){r&&(clearTimeout(r),r=null)}function a(){u.value=!1,l()}function i(...s){l(),u.value=!0,r=setTimeout(()=>{u.value=!1,r=null,e(...s)},y(t))}return o&&(u.value=!0,E&&i()),h(a),{isPending:M(u),start:i,stop:a}}function I(e){var t;const n=y(e);return(t=n==null?void 0:n.$el)!=null?t:n}const x=E?window:void 0,J=E?window.navigator:void 0;function w(...e){let t,n,o,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,u]=e,t=x):[t,n,o,u]=e,!t)return B;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(d=>d()),r.length=0},a=(d,f,v,m)=>(d.addEventListener(f,v,m),()=>d.removeEventListener(f,v,m)),i=C(()=>[I(t),y(u)],([d,f])=>{if(l(),!d)return;const v=k(f)?{...f}:f;r.push(...n.flatMap(m=>o.map(b=>a(d,m,b,v))))},{immediate:!0,flush:"post"}),s=()=>{i(),l()};return h(s),s}function q(e={}){var t;const{window:n=x,deep:o=!0}=e,u=(t=e.document)!=null?t:n==null?void 0:n.document,r=()=>{var a;let i=u==null?void 0:u.activeElement;if(o)for(;i!=null&&i.shadowRoot;)i=(a=i==null?void 0:i.shadowRoot)==null?void 0:a.activeElement;return i},l=W(()=>null,()=>r());return n&&(w(n,"blur",a=>{a.relatedTarget===null&&l.trigger()},!0),w(n,"focus",l.trigger,!0)),l}function N(){const e=g(!1);return R()&&L(()=>{e.value=!0}),e}function U(e){const t=N();return A(()=>(t.value,!!e()))}function z(e={}){const{navigator:t=J,read:n=!1,source:o,copiedDuring:u=1500,legacy:r=!1}=e,l=U(()=>t&&"clipboard"in t),a=A(()=>l.value||r),i=g(""),s=g(!1),d=F(()=>s.value=!1,u);function f(){l.value?t.clipboard.readText().then(c=>{i.value=c}):i.value=b()}a.value&&n&&w(["copy","cut"],f);async function v(c=y(o)){a.value&&c!=null&&(l.value?await t.clipboard.writeText(c):m(c),i.value=c,s.value=!0,d.start())}function m(c){const p=document.createElement("textarea");p.value=c??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function b(){var c,p,S;return(S=(p=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:p.toString())!=null?S:""}return{isSupported:a,text:i,copied:s,copy:v}}export{z as a,$ as c,q as u};
